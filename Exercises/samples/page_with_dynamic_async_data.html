
<!doctype html>
<html>
<head>
    <title>Page with Dynamic Async Data</title>
    <link rel="stylesheet" href="https://testpages.herokuapp.com/css/testpages.css">
    <!-- HEAD -->

</head>

<body>

<div class="page-body">


    <div class="page-navigation">
        <a href="https://testpages.herokuapp.com/styled/index.html">Index</a>
    </div>

    <h1>Page with Dynamic Async Data</h1>

    <div class="explanation">
        <p>An example of a page that has dynamic data populated in an asynchronous event.
        </p>
    </div>

    <div class="centered">

        <style>
            #the-data {
                margin: auto;
                height: 100px;
                line-height: 100px;
                background-color: green;
                font-size: 30pt;
                color: white;
            }
            .heart {
                color: red;
                font-size: 30pt;
            }
        </style>

        <p>
            The result is...
        </p>

        <div id="data-placeholder">
            
        </div>
    </div>


    <div class="page-footer">
        <p><a target="_blank" rel="noopener noreferrer" href="https://eviltester.com">EvilTester.com</a>,
            <a target="_blank" rel="noopener noreferrer" href="https://compendiumdev.co.uk">Compendium Developments</a></p>
    </div>

</div>

<script language="javascript">

document.getElementsByTagName('body')[0].setAttribute("data-page-loaded", "0")

window.addEventListener('load', function() {
    console.log('window.load');
    setTimeout(function(){
        var heartDiv = document.createElement('div');
        heartDiv.setAttribute('id', 'the-data');
        heartDiv.appendChild(document.createTextNode("42"));
        document.getElementById('data-placeholder').appendChild(heartDiv);

        const heartCount = Math.floor(Math.random() * 4);
        for (let index = 0; index < heartCount; index++) {
            var heartDiv = document.createElement('span');
            heartDiv.setAttribute('class', 'heart');
            heartDiv.appendChild(document.createTextNode("â™¥"));
            document.getElementById('data-placeholder').appendChild(heartDiv);
        }

        console.log("result received");
        document.getElementsByTagName('body')[0].setAttribute("data-page-loaded", "1")
    }, 1000);
})

</script>

</body>


</html>